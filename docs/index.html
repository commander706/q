<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NEON SAMURAI: OVERDRIVE</title>
  <link rel="stylesheet" href="./style.css" />
</head>
<body>
  <!-- WebGL Background -->
  <canvas id="glCanvas"></canvas>

  <!-- Main Game Container -->
  <div id="mainContainer">
    
    <!-- 試合画面 -->
    <div id="gameArea" class="hidden">
      <!-- キャラクターエリア -->
      <div class="charWrapper left" id="p1Wrapper">
        <div class="charName" id="p1Name">PLAYER 1</div>
        <img src="./cmdsozai.png" class="charImg" id="p1Img" />
      </div>
      <div class="charWrapper right" id="p2Wrapper">
        <div class="charName" id="p2Name">PLAYER 2</div>
        <img src="./cmdsozai.png" class="charImg" id="p2Img" />
      </div>

      <!-- 演出レイヤー -->
      <div id="fxLayer">
        <div id="lightning" class="hidden"></div>
        <div id="speedLines" class="hidden"></div>
        <div id="signal" class="hidden">
          <div class="signalText">今!</div>
          <div class="signalGlow"></div>
        </div>
        <div id="slashLine" class="hidden"></div>
      </div>
    </div>

    <!-- UIパネル（ロビー・メニュー） -->
    <div id="uiLayer">
      <div id="panel" class="panel">
        <div class="panelTitle">NEON SAMURAI</div>
        <div class="panelSub">CYBERPUNK DUEL</div>

        <!-- ログイン -->
        <div id="loginForm">
          <div class="row">
            <input id="nameInput" maxlength="12" placeholder="CODENAME" />
            <input id="roomInput" maxlength="12" placeholder="ROOM ID" />
          </div>
          <div class="row buttons">
            <button id="createBtn" class="glitch-btn">HOST GAME</button>
            <button id="joinBtn" class="glitch-btn">JOIN GAME</button>
          </div>
        </div>

        <!-- ロビー -->
        <div id="lobbyArea" class="hidden">
          <div class="lobbyHeader">
            <span>CONNECTION ESTABLISHED</span>
            <span id="roomCodeDisplay">ROOM: ---</span>
          </div>
          <div id="playersList" class="playersList"></div>
          <div class="row">
            <button id="startTourneyBtn" class="glitch-btn hidden">INITIATE TOURNAMENT</button>
          </div>
          <div id="msg" class="msg">Waiting for players...</div>
        </div>

        <!-- トーナメント表 -->
        <div id="bracketArea" class="hidden">
          <div class="lobbyHeader">TOURNAMENT BRACKET</div>
          <div id="bracketList" class="bracketList"></div>
          <div id="bracketStatus" class="bracketStatus">Preparing...</div>
        </div>
      </div>
      
      <!-- 接続状況 -->
      <div id="hud">
        <div class="pill" id="connStatus">OFFLINE</div>
      </div>
    </div>
  </div>

  <!-- カットイン演出 -->
  <div id="cutInLayer" class="hidden">
    <div class="cinematicBar top"></div>
    <div class="cinematicBar bottom"></div>
    <div class="facePanel left" id="cutInP1">
      <img src="./cmdsozai.png" />
      <div class="cutInName" id="cutInName1">P1</div>
    </div>
    <div class="facePanel right" id="cutInP2">
      <img src="./cmdsozai.png" />
      <div class="cutInName" id="cutInName2">P2</div>
    </div>
    <div class="versusText">VS</div>
  </div>

  <!-- 斬撃エフェクト用のコンテナ -->
  <div id="sliceContainer"></div>

  <!-- 勝敗リザルト（試合ごとの結果） -->
  <div id="resultLayer" class="hidden">
    <div id="winTitle">WINNER</div>
    <div id="winName">NAME</div>
    <div id="reactTime">0.00s</div>
    <div id="rankText">GODLIKE</div>
  </div>

  <!-- 優勝者演出レイヤー -->
  <div id="championLayer" class="hidden">
    <div class="champContainer">
      <div class="rotatingRing outer"></div>
      <div class="rotatingRing inner"></div>
      <div class="champTitle">TOURNAMENT CHAMPION</div>
      <img src="./cmdsozai.png" class="champImg" />
      <div id="champName" class="champName">PLAYER NAME</div>
      <div class="champSub">Returning to lobby...</div>
    </div>
  </div>

  <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
  <script src="./main.js"></script>
</body>
</html>